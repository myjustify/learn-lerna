{"version":3,"file":"vuex-lasting.mjs","sources":["../index.js","../node_modules/shvl/dist/shvl.mjs"],"sourcesContent":["import * as shvl from \"shvl\";\n\nexport default function lasting(options = {}) {\n  return (store) => {\n    let { key, opt, paths = [] } = options;\n    key = key || \"lasting\";\n    opt = opt || {\n      set: (k, v) => {\n        try {\n          v = JSON.stringify(v);\n        } catch (err) {\n          console.warn(\"lasting set err:\", err);\n        }\n        return localStorage.setItem(`${key}-${k}`, v);\n      },\n      get: (k) => {\n        let v = localStorage.getItem(`${key}-${k}`);\n        try {\n          v = JSON.parse(v);\n        } catch (err) {\n          console.warn(\"lasting get err:\", err);\n        }\n        return v;\n      },\n      rm: (k) => {\n        return localStorage.removeItem(`${key}-${k}`);\n      }\n    };\n\n    for (let i = 0; i < paths.length; i++) {\n      const son = paths[i];\n      const sv = opt.get(son);\n      sv && shvl.set(store.state, son, sv);\n      store.watch(\n        (state) => shvl.get(state, son),\n        (v) => {\n          opt.set(son, v);\n        }\n      );\n    }\n  };\n}\n","function t(t,r,e){return void 0===(t=(r.split?r.split(\".\"):r).reduce(function(t,r){return t&&t[r]},t))?e:t}function r(t,r,e,n){return!/^(__proto__|constructor|prototype)$/.test(r)&&((r=r.split?r.split(\".\"):r.slice(0)).slice(0,-1).reduce(function(t,r){return t[r]=t[r]||{}},t)[r.pop()]=e),t}export{t as get,r as set};\n//# sourceMappingURL=shvl.mjs.map\n"],"names":["lasting","options","store","key","opt","paths","set","k","v","JSON","stringify","err","console","warn","localStorage","setItem","get","getItem","parse","rm","removeItem","i","t","r","e","son","sv","state","test","split","slice","reduce","pop","watch","shvl","length"],"mappings":"SAEwBA,EAAQC,GAC9B,gBAD8BA,IAAAA,EAAU,aAChCC,GACN,IAAMC,EAAyBF,EAAzBE,IAAKC,EAAoBH,EAApBG,MAAoBH,EAAfI,MAAAA,aAAQ,KACxBF,EAAMA,GAAO,UACbC,EAAMA,GAAO,CACXE,IAAK,SAACC,EAAGC,GACP,IACEA,EAAIC,KAAKC,UAAUF,GACnB,MAAOG,GACPC,QAAQC,KAAK,mBAAoBF,GAEnC,OAAOG,aAAaC,QAAWZ,MAAOI,EAAKC,IAE7CQ,IAAK,SAACT,GACJ,IAAIC,EAAIM,aAAaG,QAAWd,MAAOI,GACvC,IACEC,EAAIC,KAAKS,MAAMV,GACf,MAAOG,GACPC,QAAQC,KAAK,mBAAoBF,GAEnC,OAAOH,GAETW,GAAI,SAACZ,GACH,OAAOO,aAAaM,WAAcjB,MAAOI,KAI7C,IA1BgB,eA0BPc,GACP,IC9BgHC,EAAEC,EAAEC,ED8B9GC,EAAMpB,EAAMgB,GACZK,EAAKtB,EAAIY,IAAIS,GACnBC,IChCgHJ,EDgCjGpB,EAAMyB,MChC+FH,EDgCnFE,GChC+F,sCAAsCE,KAApDL,EDgCtFE,MChCqJF,EAAEA,EAAEM,MAAMN,EAAEM,MAAM,KAAKN,EAAEO,MAAM,IAAIA,MAAM,GAAG,GAAGC,OAAO,SAAST,EAAEC,GAAG,OAAOD,EAAEC,GAAGD,EAAEC,IAAI,IAAID,GAAGC,EAAES,OAAOR,IDiCvRtB,EAAM+B,MACJ,SAACN,UClCT,SAAWL,EAAEC,EAAEC,GAAG,YAAO,KAAUF,GAAGC,EAAEM,MAAMN,EAAEM,MAAM,KAAKN,GAAGQ,OAAO,SAAST,EAAEC,GAAG,OAAOD,GAAGA,EAAEC,IAAID,SDkChFY,EClCsFZ,EDkCtFY,CAASP,EAAOF,IAC3B,SAACjB,GACCJ,EAAIE,IAAImB,EAAKjB,MAPVa,EAAI,EAAGA,EAAIhB,EAAM8B,OAAQd,MAAzBA"}